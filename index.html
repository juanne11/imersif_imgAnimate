<!DOCTYPE html>
<html>
  <head>
    <title>AR Patung Papua - Hiro Marker</title>
    <meta name="description" content="AR berbasis marker Hiro dengan model orpap.glb" />
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <script src="https://rawcdn.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <!-- Tombol kontrol -->
    <div style="
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 10;
    ">
      <button id="animate-button" style="padding: 12px 24px; font-size: 16px; cursor: pointer;">
        Putar Patung
      </button>
    </div>

    <!-- Scene AR -->
    <a-scene embedded arjs>
      <a-assets>
        <!-- Pastikan file orpap.glb ada di folder yang sama -->
        <a-asset-item id="modelOrpap" src="./orpap.glb"></a-asset-item>
      </a-assets>

      <!-- Marker Hiro -->
      <a-marker preset="hiro">
        <a-entity id="rotator" position="0 0 0">
          <a-gltf-model
            id="patungPapua"
            src="#modelOrpap"
            position="0 0.2 0"
            scale="0.4 0.4 0.4"
            rotation="-90 0 0"
          ></a-gltf-model>
        </a-entity>
      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>

    <!-- Script interaksi -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const button = document.getElementById("animate-button");
        const rotator = document.getElementById("rotator");

        // Tambahkan animasi ke entity setelah scene siap
        rotator.setAttribute("animation", {
          property: "rotation",
          from: "0 0 0",
          to: "0 360 0",
          loop: true,
          dur: 10000,
          easing: "linear",
          startEvents: "start-rotation",
          pauseEvents: "pause-rotation"
        });

        // Tombol untuk memulai atau menghentikan rotasi
        let isRotating = false;
        button.addEventListener("click", () => {
          if (!isRotating) {
            rotator.emit("start-rotation");
            button.textContent = "Hentikan Rotasi";
          } else {
            rotator.emit("pause-rotation");
            button.textContent = "Putar Patung";
          }
          isRotating = !isRotating;
        });
      });
    </script>
  </body>
</html>
